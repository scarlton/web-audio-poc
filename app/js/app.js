angular.module('webAudioApp', []);

angular.module('webAudioApp').config(function() {
  window.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;
  return window.AudioContext = window.AudioContext || window.webkitAudioContext;
});

var MainController,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  __hasProp = {}.hasOwnProperty;

MainController = (function() {
  function MainController(_at_$scope, _at_$http, channelStripFactory) {
    this.$scope = _at_$scope;
    this.$http = _at_$http;
    this.reset = __bind(this.reset, this);
    this.stop = __bind(this.stop, this);
    this.play = __bind(this.play, this);
    this._createBufferNode = __bind(this._createBufferNode, this);
    this.$scope.channelStrip = channelStripFactory;
    this.$scope.play = this.play;
    this.$scope.stop = this.stop;
    this.$scope.rest = this.reset;
    this.$scope.thing = '';
    this.initAudioEngine();
    this.buildChannelStrip();
  }

  MainController.prototype.initAudioEngine = function() {
    this.audioEngine = new window.AudioContext();
    this.masterFader = this.audioEngine.createGain();
    this.masterFader.connect(this.audioEngine.destination);
    return this.$scope.isPlaying = false;
  };

  MainController.prototype.buildChannelStrip = function() {
    var control, idx, param, value, _i, _j, _len, _len1, _ref, _ref1, _ref2;
    _ref = this.$scope.channelStrip.controls;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      control = _ref[_i];
      switch (control.type) {
        case 'gain':
          control.node = this.audioEngine.createGain();
          break;
        case 'biquad':
          control.node = this.audioEngine.createBiquadFilter();
      }
      _ref1 = control.parameters;
      for (param in _ref1) {
        if (!__hasProp.call(_ref1, param)) continue;
        value = _ref1[param];
        if (param === 'type') {
          control.node.type = value;
        } else {
          control.node[param].value = value;
        }
      }
    }
    _ref2 = this.$scope.channelStrip.controls;
    for (idx = _j = 0, _len1 = _ref2.length; _j < _len1; idx = ++_j) {
      control = _ref2[idx];
      if (idx < this.$scope.channelStrip.controls.length - 1) {
        control.node.connect(this.$scope.channelStrip.controls[idx + 1].node);
      } else {
        control.node.connect(this.masterFader);
      }
    }
    return this.$http.get(this.$scope.channelStrip.source.file, {
      responseType: 'arraybuffer'
    }).then((function(_this) {
      return function(response) {
        return _this.audioEngine.decodeAudioData(response.data, _this._createBufferNode);
      };
    })(this));
  };

  MainController.prototype._createBufferNode = function(buffer) {
    return this.$scope.channelStrip.source.buffer = buffer;
  };

  MainController.prototype.play = function() {
    this.$scope.channelStrip.source.node = this.audioEngine.createBufferSource();
    this.$scope.channelStrip.source.node.buffer = this.$scope.channelStrip.source.buffer;
    this.$scope.channelStrip.source.node.loop = true;
    this.$scope.channelStrip.source.node.connect(this.$scope.channelStrip.controls[0].node);
    this.$scope.channelStrip.source.node.start(0, 0);
    return this.$scope.isPlaying = true;
  };

  MainController.prototype.stop = function() {
    this.$scope.channelStrip.source.node.stop(0);
    return this.$scope.isPlaying = false;
  };

  MainController.prototype.reset = function() {
    var control, param, value, _i, _len, _ref, _results;
    _ref = this.$scope.channelStrip.controls;
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      control = _ref[_i];
      _results.push((function() {
        var _ref1, _results1;
        _ref1 = control.parameters;
        _results1 = [];
        for (param in _ref1) {
          if (!__hasProp.call(_ref1, param)) continue;
          value = _ref1[param];
          if (param === 'type') {
            _results1.push(control.node.type = value);
          } else {
            _results1.push(control.node[param].value = value);
          }
        }
        return _results1;
      })());
    }
    return _results;
  };

  return MainController;

})();

angular.module('webAudioApp').controller('MainController', ['$scope', '$http', 'channelStripFactory', MainController]);

var knob;

knob = function() {
  return {
    link: function(scope, elem, attrs) {
      return elem.bind('click', function() {
        return console.log(scope.thing);
      });
    },
    restrict: 'AE',
    scope: true,
    template: '<h3>Hello World!!</h3>'
  };
};

angular.module('webAudioApp').directive('knob', knob);

angular.module('webAudioApp').factory('channelStripFactory', function() {
  return {
    source: {
      file: 'assets/snare4.wav'
    },
    controls: [
      {
        name: 'Input gain',
        type: 'gain',
        parameters: {
          gain: 1
        }
      }, {
        name: 'HF',
        type: 'biquad',
        parameters: {
          type: 'highshelf',
          frequency: 12000,
          gain: 0
        },
        limits: {
          gain: {
            max: 15,
            min: -15
          }
        }
      }, {
        name: 'HM',
        type: 'biquad',
        parameters: {
          type: 'peaking',
          frequency: 3000,
          gain: 0,
          Q: 1.414
        },
        limits: {
          gain: {
            max: 15,
            min: -15
          },
          frequency: {
            max: 15000,
            min: 500
          }
        }
      }, {
        name: 'LM',
        type: 'biquad',
        parameters: {
          type: 'peaking',
          frequency: 180,
          gain: 0,
          Q: 1.414
        },
        limits: {
          gain: {
            max: 15,
            min: -15
          },
          frequency: {
            max: 1000,
            min: 35
          }
        }
      }, {
        name: 'LF',
        type: 'biquad',
        parameters: {
          type: 'lowshelf',
          frequency: 80,
          gain: 0
        },
        limits: {
          gain: {
            max: 15,
            min: -15
          }
        }
      }, {
        name: 'Fader',
        type: 'gain',
        parameters: {
          gain: 1
        }
      }
    ]
  };
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5jb2ZmZWUiLCJjb25maWcuY29mZmVlIiwiY29udHJvbGxlcnMuY29mZmVlIiwiZGlyZWN0aXZlLmNvZmZlZSIsImZhY3RvcnkuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sQ0FBQyxNQUFSLENBQWdCLGFBQWhCLEVBQThCLEVBQTlCLENBQUEsQ0FBQTs7QUNBQSxPQUFPLENBQUMsTUFBUixDQUFnQixhQUFoQixDQUNFLENBQUMsTUFESCxDQUNVLFNBQUEsR0FBQTtBQUNOLEVBQUEsTUFBTSxDQUFDLHFCQUFQLEdBQStCLE1BQU0sQ0FBQyxxQkFBUCxJQUFnQyxNQUFNLENBQUMsMkJBQXZDLElBQXNFLE1BQU0sQ0FBQyx3QkFBNUcsQ0FBQTtTQUNBLE1BQU0sQ0FBQyxZQUFQLEdBQXNCLE1BQU0sQ0FBQyxZQUFQLElBQXVCLE1BQU0sQ0FBQyxtQkFGOUM7QUFBQSxDQURWLENBQUEsQ0FBQTs7QUNBQSxJQUFBLGNBQUE7RUFBQTsrQkFBQTs7QUFBQTtBQUNlLEVBQUEsd0JBQUMsVUFBRCxFQUFVLFNBQVYsRUFBa0IsbUJBQWxCLEdBQUE7QUFDWCxJQURZLElBQUMsQ0FBQSxTQUFELFVBQ1osQ0FBQTtBQUFBLElBRHFCLElBQUMsQ0FBQSxRQUFELFNBQ3JCLENBQUE7QUFBQSx5Q0FBQSxDQUFBO0FBQUEsdUNBQUEsQ0FBQTtBQUFBLHVDQUFBLENBQUE7QUFBQSxpRUFBQSxDQUFBO0FBQUEsSUFBQSxJQUFDLENBQUEsTUFBTSxDQUFDLFlBQVIsR0FBdUIsbUJBQXZCLENBQUE7QUFBQSxJQUNBLElBQUMsQ0FBQSxNQUFNLENBQUMsSUFBUixHQUFlLElBQUMsQ0FBQSxJQURoQixDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsTUFBTSxDQUFDLElBQVIsR0FBZSxJQUFDLENBQUEsSUFGaEIsQ0FBQTtBQUFBLElBR0EsSUFBQyxDQUFBLE1BQU0sQ0FBQyxJQUFSLEdBQWUsSUFBQyxDQUFBLEtBSGhCLENBQUE7QUFBQSxJQUtB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QUFBQSxZQUFBLEdBQUEsRUFBSyxFQUFMO0FBQUEsWUFDQSxHQUFBLEVBQUssQ0FBQSxFQURMO1dBREY7QUFBQSxVQUdBLFNBQUEsRUFDRTtBQUFBLFlBQUEsR0FBQSxFQUFLLElBQUw7QUFBQSxZQUNBLEdBQUEsRUFBSyxFQURMO1dBSkY7U0FSRjtPQWhDTSxFQStDTjtBQUFBLFFBQUEsSUFBQSxFQUFPLElBQVA7QUFBQSxRQUNBLElBQUEsRUFBTyxRQURQO0FBQUEsUUFFQSxVQUFBLEVBQ0U7QUFBQSxVQUFBLElBQUEsRUFBTyxVQUFQO0FBQUEsVUFDQSxTQUFBLEVBQVcsRUFEWDtBQUFBLFVBRUEsSUFBQSxFQUFNLENBRk47U0FIRjtBQUFBLFFBTUEsTUFBQSxFQUNFO0FBQUEsVUFBQSxJQUFBLEVBQ0U7QUFBQSxZQUFBLEdBQUEsRUFBSyxFQUFMO0FBQUEsWUFDQSxHQUFBLEVBQUssQ0FBQSxFQURMO1dBREY7U0FQRjtPQS9DTSxFQTBETjtBQUFBLFFBQUEsSUFBQSxFQUFPLE9BQVA7QUFBQSxRQUNBLElBQUEsRUFBTyxNQURQO0FBQUEsUUFFQSxVQUFBLEVBQ0U7QUFBQSxVQUFBLElBQUEsRUFBTSxDQUFOO1NBSEY7T0ExRE07S0FGVjtJQUQyRDtBQUFBLENBQTdELENBQUEsQ0FBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnd2ViQXVkaW9BcHAnLCBbXSkiLCJhbmd1bGFyLm1vZHVsZSgnd2ViQXVkaW9BcHAnKVxuICAuY29uZmlnIC0+XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgb3Igd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSBvciB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gICAgd2luZG93LkF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgb3Igd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCIsImNsYXNzIE1haW5Db250cm9sbGVyXG4gIGNvbnN0cnVjdG9yOiAoQCRzY29wZSwgQCRodHRwLCBjaGFubmVsU3RyaXBGYWN0b3J5KSAtPlxuICAgIEAkc2NvcGUuY2hhbm5lbFN0cmlwID0gY2hhbm5lbFN0cmlwRmFjdG9yeVxuICAgIEAkc2NvcGUucGxheSA9IEBwbGF5XG4gICAgQCRzY29wZS5zdG9wID0gQHN0b3BcbiAgICBAJHNjb3BlLnJlc3QgPSBAcmVzZXRcblxuICAgIEAkc2NvcGUudGhpbmcgPSAnJ1xuXG4gICAgQGluaXRBdWRpb0VuZ2luZSgpXG4gICAgQGJ1aWxkQ2hhbm5lbFN0cmlwKClcblxuICBpbml0QXVkaW9FbmdpbmU6IC0+XG4gICAgQGF1ZGlvRW5naW5lID0gbmV3IHdpbmRvdy5BdWRpb0NvbnRleHQoKVxuXG4gICAgQG1hc3RlckZhZGVyID0gQGF1ZGlvRW5naW5lLmNyZWF0ZUdhaW4oKVxuICAgIEBtYXN0ZXJGYWRlci5jb25uZWN0KEBhdWRpb0VuZ2luZS5kZXN0aW5hdGlvbilcblxuICAgIEAkc2NvcGUuaXNQbGF5aW5nID0gZmFsc2VcblxuICBidWlsZENoYW5uZWxTdHJpcDogLT5cbiAgICAjIGNyZWF0ZSBhdWRpbyBub2RlcyBmb3IgZWFjaCBjb250cm9sXG4gICAgZm9yIGNvbnRyb2wgaW4gQCRzY29wZS5jaGFubmVsU3RyaXAuY29udHJvbHNcbiAgICAgIHN3aXRjaCBjb250cm9sLnR5cGVcbiAgICAgICAgd2hlbiAnZ2FpbidcbiAgICAgICAgICBjb250cm9sLm5vZGUgPSBAYXVkaW9FbmdpbmUuY3JlYXRlR2FpbigpXG5cbiAgICAgICAgd2hlbiAnYmlxdWFkJ1xuICAgICAgICAgIGNvbnRyb2wubm9kZSA9IEBhdWRpb0VuZ2luZS5jcmVhdGVCaXF1YWRGaWx0ZXIoKVxuXG4gICAgICAjIGZpbGwgaW4gZGVmYXVsdCBwYXJhbWV0ZXJzIGZyb20gdGhlIGZhY3Rvcnkgb2JqZWN0XG4gICAgICBmb3Igb3duIHBhcmFtLCB2YWx1ZSBvZiBjb250cm9sLnBhcmFtZXRlcnNcbiAgICAgICAgaWYgcGFyYW0gaXMgJ3R5cGUnXG4gICAgICAgICAgY29udHJvbC5ub2RlLnR5cGUgPSB2YWx1ZVxuICAgICAgICBlbHNlXG4gICAgICAgICAgY29udHJvbC5ub2RlW3BhcmFtXS52YWx1ZSA9IHZhbHVlXG5cbiAgICAjIGNvbm5lY3QgZWFjaCBub2RlIGluIHNlcmllc1xuICAgIGZvciBjb250cm9sLCBpZHggaW4gQCRzY29wZS5jaGFubmVsU3RyaXAuY29udHJvbHNcbiAgICAgIGlmIGlkeCA8IEAkc2NvcGUuY2hhbm5lbFN0cmlwLmNvbnRyb2xzLmxlbmd0aCAtIDFcbiAgICAgICAgY29udHJvbC5ub2RlLmNvbm5lY3QoQCRzY29wZS5jaGFubmVsU3RyaXAuY29udHJvbHNbaWR4KzFdLm5vZGUpXG4gICAgICBlbHNlXG4gICAgICAgICMgY29ubmVjdCB0aGUgbGFzdCBub2RlIHRvIHRoZSBtaXggYnVzXG4gICAgICAgIGNvbnRyb2wubm9kZS5jb25uZWN0KEBtYXN0ZXJGYWRlcilcblxuICAgIEAkaHR0cC5nZXQoQCRzY29wZS5jaGFubmVsU3RyaXAuc291cmNlLmZpbGUsIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJykudGhlbiAocmVzcG9uc2UpID0+XG4gICAgICBAYXVkaW9FbmdpbmUuZGVjb2RlQXVkaW9EYXRhKHJlc3BvbnNlLmRhdGEsIEBfY3JlYXRlQnVmZmVyTm9kZSlcblxuICBfY3JlYXRlQnVmZmVyTm9kZTogKGJ1ZmZlcikgPT5cbiAgICAgIEAkc2NvcGUuY2hhbm5lbFN0cmlwLnNvdXJjZS5idWZmZXIgPSBidWZmZXJcblxuICBwbGF5OiA9PlxuICAgIEAkc2NvcGUuY2hhbm5lbFN0cmlwLnNvdXJjZS5ub2RlID0gQGF1ZGlvRW5naW5lLmNyZWF0ZUJ1ZmZlclNvdXJjZSgpXG4gICAgQCRzY29wZS5jaGFubmVsU3RyaXAuc291cmNlLm5vZGUuYnVmZmVyID0gQCRzY29wZS5jaGFubmVsU3RyaXAuc291cmNlLmJ1ZmZlclxuICAgIEAkc2NvcGUuY2hhbm5lbFN0cmlwLnNvdXJjZS5ub2RlLmxvb3AgPSB0cnVlXG4gICAgQCRzY29wZS5jaGFubmVsU3RyaXAuc291cmNlLm5vZGUuY29ubmVjdChAJHNjb3BlLmNoYW5uZWxTdHJpcC5jb250cm9sc1swXS5ub2RlKVxuICAgIEAkc2NvcGUuY2hhbm5lbFN0cmlwLnNvdXJjZS5ub2RlLnN0YXJ0KDAsIDApXG4gICAgQCRzY29wZS5pc1BsYXlpbmcgPSB0cnVlXG5cbiAgc3RvcDogPT5cbiAgICBAJHNjb3BlLmNoYW5uZWxTdHJpcC5zb3VyY2Uubm9kZS5zdG9wKDApXG4gICAgQCRzY29wZS5pc1BsYXlpbmcgPSBmYWxzZVxuXG4gIHJlc2V0OiA9PlxuICAgIGZvciBjb250cm9sIGluIEAkc2NvcGUuY2hhbm5lbFN0cmlwLmNvbnRyb2xzXG4gICAgICBmb3Igb3duIHBhcmFtLCB2YWx1ZSBvZiBjb250cm9sLnBhcmFtZXRlcnNcbiAgICAgICAgaWYgcGFyYW0gaXMgJ3R5cGUnXG4gICAgICAgICAgY29udHJvbC5ub2RlLnR5cGUgPSB2YWx1ZVxuICAgICAgICBlbHNlXG4gICAgICAgICAgY29udHJvbC5ub2RlW3BhcmFtXS52YWx1ZSA9IHZhbHVlXG5cbmFuZ3VsYXIubW9kdWxlKCd3ZWJBdWRpb0FwcCcpXG4gIC5jb250cm9sbGVyICdNYWluQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRodHRwJywgJ2NoYW5uZWxTdHJpcEZhY3RvcnknLCBNYWluQ29udHJvbGxlcl0iLCJrbm9iID0gLT5cbiAgbGluazogKHNjb3BlLCBlbGVtLCBhdHRycykgLT5cbiAgICBlbGVtLmJpbmQgJ2NsaWNrJywgLT5cbiAgICAgIGNvbnNvbGUubG9nIHNjb3BlLnRoaW5nXG4gIHJlc3RyaWN0OiAnQUUnXG4gIHNjb3BlOiB0cnVlXG4gIHRlbXBsYXRlOiAnPGgzPkhlbGxvIFdvcmxkISE8L2gzPidcblxuYW5ndWxhci5tb2R1bGUoJ3dlYkF1ZGlvQXBwJylcbiAgLmRpcmVjdGl2ZSgna25vYicsIGtub2IpIiwiYW5ndWxhci5tb2R1bGUoJ3dlYkF1ZGlvQXBwJykuZmFjdG9yeSAnY2hhbm5lbFN0cmlwRmFjdG9yeScsIC0+XG4gIHNvdXJjZTpcbiAgICBmaWxlOiAnYXNzZXRzL3NuYXJlNC53YXYnXG4gIGNvbnRyb2xzOiBbXG4gICAgICBuYW1lOiAnSW5wdXQgZ2FpbidcbiAgICAgIHR5cGU6ICdnYWluJ1xuICAgICAgcGFyYW1ldGVyczpcbiAgICAgICAgZ2FpbjogMVxuICAgICxcbiAgICAgIG5hbWU6ICdIRidcbiAgICAgIHR5cGU6ICdiaXF1YWQnXG4gICAgICBwYXJhbWV0ZXJzOlxuICAgICAgICB0eXBlOiAnaGlnaHNoZWxmJ1xuICAgICAgICBmcmVxdWVuY3k6IDEyMDAwXG4gICAgICAgIGdhaW46IDBcbiAgICAgIGxpbWl0czpcbiAgICAgICAgZ2FpbjpcbiAgICAgICAgICBtYXg6IDE1XG4gICAgICAgICAgbWluOiAtMTVcbiAgICAsXG4gICAgICBuYW1lOiAnSE0nXG4gICAgICB0eXBlOiAnYmlxdWFkJ1xuICAgICAgcGFyYW1ldGVyczpcbiAgICAgICAgdHlwZTogJ3BlYWtpbmcnXG4gICAgICAgIGZyZXF1ZW5jeTogMzAwMFxuICAgICAgICBnYWluOiAwXG4gICAgICAgIFE6IDEuNDE0XG4gICAgICBsaW1pdHM6XG4gICAgICAgIGdhaW46XG4gICAgICAgICAgbWF4OiAxNVxuICAgICAgICAgIG1pbjogLTE1XG4gICAgICAgIGZyZXF1ZW5jeTpcbiAgICAgICAgICBtYXg6IDE1MDAwXG4gICAgICAgICAgbWluOiA1MDBcbiAgICAsXG4gICAgICBuYW1lOiAnTE0nXG4gICAgICB0eXBlOiAnYmlxdWFkJ1xuICAgICAgcGFyYW1ldGVyczpcbiAgICAgICAgdHlwZTogJ3BlYWtpbmcnXG4gICAgICAgIGZyZXF1ZW5jeTogMTgwXG4gICAgICAgIGdhaW46IDBcbiAgICAgICAgUTogMS40MTRcbiAgICAgIGxpbWl0czpcbiAgICAgICAgZ2FpbjpcbiAgICAgICAgICBtYXg6IDE1XG4gICAgICAgICAgbWluOiAtMTVcbiAgICAgICAgZnJlcXVlbmN5OlxuICAgICAgICAgIG1heDogMTAwMFxuICAgICAgICAgIG1pbjogMzVcbiAgICAsXG4gICAgICBuYW1lOiAnTEYnXG4gICAgICB0eXBlOiAnYmlxdWFkJ1xuICAgICAgcGFyYW1ldGVyczpcbiAgICAgICAgdHlwZTogJ2xvd3NoZWxmJ1xuICAgICAgICBmcmVxdWVuY3k6IDgwXG4gICAgICAgIGdhaW46IDBcbiAgICAgIGxpbWl0czpcbiAgICAgICAgZ2FpbjpcbiAgICAgICAgICBtYXg6IDE1XG4gICAgICAgICAgbWluOiAtMTVcbiAgICAsXG4gICAgICBuYW1lOiAnRmFkZXInXG4gICAgICB0eXBlOiAnZ2FpbidcbiAgICAgIHBhcmFtZXRlcnM6XG4gICAgICAgIGdhaW46IDFcbiAgXSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==